<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Make, Update, and Query Binary Causal Models • CausalQueries</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Make, Update, and Query Binary Causal Models">
<meta name="description" content="Users can declare causal models over binary nodes, update beliefs about causal types given data, and calculate arbitrary queries. Updating is implemented in stan. See Humphreys and Jacobs, 2023, Integrated Inferences (&lt;DOI: 10.1017/9781316718636&gt;) and Pearl, 2009 Causality (&lt;DOI:10.1017/CBO9780511803161&gt;).">
<meta property="og:description" content="Users can declare causal models over binary nodes, update beliefs about causal types given data, and calculate arbitrary queries. Updating is implemented in stan. See Humphreys and Jacobs, 2023, Integrated Inferences (&lt;DOI: 10.1017/9781316718636&gt;) and Pearl, 2009 Causality (&lt;DOI:10.1017/CBO9780511803161&gt;).">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">CausalQueries</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.2.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/a-getting-started.html">Getting Started</a></li>
    <li><a class="dropdown-item" href="articles/b-plotting.html">Plotting models</a></li>
    <li><a class="dropdown-item" href="articles/c-canonical-models.html">Canonical causal models</a></li>
    <li><a class="dropdown-item" href="articles/d-front-door.html">Through the front door</a></li>
    <li><a class="dropdown-item" href="articles/e-posteriors.html">Inspecting posteriors</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/integrated-inferences/CausalQueries/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="causalqueries">CausalQueries<a class="anchor" aria-label="anchor" href="#causalqueries"></a>
</h1></div>
<!-- badges: start -->

<p><code>CausalQueries</code> is a package that lets you declare binary causal models, update beliefs about causal types given data and calculate arbitrary estimands. Model definition is implemented via a <code>dagitty</code> style syntax. Updating is implemented in <code>stan</code>.</p>
<ul>
<li><p>See vignettes for a guide to getting started.</p></li>
<li><p>See <a href="https://macartan.github.io/assets/pdf/papers/2024_CausalQueries.pdf" class="external-link">here</a> for a guide to using <code>CausalQueries</code> along with many examples of causal models</p></li>
<li><p>See <a href="https://integrated-inferences.github.io/CausalQueries/">website</a> for a comprehensive overview of <code>CausalQueries</code></p></li>
</ul>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>To install the latest stable release of <code>CausalQueries</code>:</p>
<pre><code><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"CausalQueries"</span><span class="op">)</span></span></code></pre>
<p>To install the latest development release :</p>
<pre><code><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"integrated-inferences/CausalQueries"</span><span class="op">)</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="helping-out--contributing">Helping Out &amp; Contributing<a class="anchor" aria-label="anchor" href="#helping-out--contributing"></a>
</h2>
<p><code>CausalQueries</code> is an open and active developer community. We welcome contributions and are excited you are keen to get involved. Please refer to <code>CONTRIBUTING.md</code> to get started.</p>
</div>
<div class="section level2">
<h2 id="causal-models">Causal Models<a class="anchor" aria-label="anchor" href="#causal-models"></a>
</h2>
<p>Causal models are defined by:</p>
<ul>
<li>A <strong>directed acyclic graph</strong> (DAG), which provides the set of variables, a causal ordering between them, and a set of assumptions regarding conditional independence. If there is no arrow from <code>A</code> to <code>B</code> then a change in <code>A</code> never induces a change in <code>B</code>.</li>
<li>
<strong>Functional forms</strong>. Functional forms describe the causal relationships between nodes. You often have to make strong assumptions when you specify a functional form; fortunately however if variables are categorical we do not need functional forms in the usual sense. The DAG implies a set of “causal types.” Units can be classed together as of the same causal type if they respond to the same way to other variables. For instance, a type might be the set of units for which <code>X=1</code> and for which <code>Y=1</code> if and only if <code>X=1</code>. The set of causal types grows rapidly with the number of nodes and the number of nodes pointing into any given node. In this setting imposing functional forms is the same as placing <em>restrictions on causal types</em>: such restrictions reduce complexity but require substantive assumptions. An example of a restriction might be “<code>Y</code> is monotonic in <code>X</code>.”</li>
<li>
<strong>Priors.</strong> In the standard case, the DAG plus any restrictions imply a set of parameters that combine to form causal types. These are the parameters we want to learn about. To learn about them we first provide priors over the parameters. With priors specified the causal model is complete (it is a “probabilistic causal model”) and we are ready for inference. Setting priors is done using the <code>set_priors</code> function and many examples can be seen by typing <code>? set_priors.R</code>.</li>
</ul>
<p>A wrinkle:</p>
<ul>
<li>It is possible that nodes are related in ways not captured by the DAG. In such cases dotted curves are sometimes placed between nodes on a graph. It is possible to specify such possible <strong>unobservable confounding</strong> in the causal model. This has implications for the parameter space.</li>
</ul>
</div>
<div class="section level2">
<h2 id="inference">Inference<a class="anchor" aria-label="anchor" href="#inference"></a>
</h2>
<p>Our goal is to form beliefs over parameters but also over more substantive estimands:</p>
<ul>
<li><p>With a causal model in hand and data available about some or all of the nodes, it is possible to make use of a generic <code>stan</code> model that generates posteriors over the parameter vector.</p></li>
<li><p>Given updated (or prior) beliefs about parameters it is possible to calculate causal estimands of inference from a causal model. For example “What is the probability that <code>X</code> was the cause of <code>Y</code> given <code>X=1</code>, <code>Y=1</code> and <code>Z=1</code>.”</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="credits-etc">Credits etc<a class="anchor" aria-label="anchor" href="#credits-etc"></a>
</h2>
<p>The approach used in <code>CausalQueries</code> is developed in <a href="https://macartan.github.io/integrated_inferences/" class="external-link">Humphreys and Jacobs 2023</a> drawing on work on probabilistic causal models described in Pearl’s <a href="https://www.cambridge.org/core/books/causality/B0046844FAE10CBF274D4ACBDAEB5F5B" class="external-link"><em>Causality</em></a> (Pearl, 2009). We thank Ben Goodrich who provided generous insights on using <code>stan</code> for this project. We thank Alan M Jacobs for key work developing the framework underlying the package. Our thanks to Jasper Cooper for contributions generating a generic function to create Stan code, to <a href="https://clarabicalho.github.io/" class="external-link">Clara Bicalho</a> who helped figure out the syntax for causal statements, to <a href="https://www.gov.harvard.edu/directory/julio-s-solis-arce/" class="external-link">Julio S. Solís Arce</a> who made many key contributions figuring out how to simplify the specification of priors, and to <a href="https://merlinheidemanns.github.io/website/" class="external-link">Merlin Heidemanns</a> who figured out the <code>rstantools</code> integration and made myriad code improvements.</p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=CausalQueries" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/integrated-inferences/CausalQueries/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/integrated-inferences/CausalQueries/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>

<div class="community">
<h2 data-toc-skip>Community</h2>
<ul class="list-unstyled">
<li><a href="CONTRIBUTING.html">Contributing guide</a></li>
</ul>
</div>

<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing CausalQueries</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Macartan Humphreys <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0001-7029-2326" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Till Tietz <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-2916-9059" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Alan Jacobs <br><small class="roles"> Author </small>  </li>
<li>Lily Medina <br><small class="roles"> Author </small> <a href="https://orcid.org/0009-0004-2423-524X" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Georgiy Syunyaev <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-4391-6313" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://CRAN.R-project.org/package=CausalQueries" class="external-link"><img src="https://www.r-pkg.org/badges/version/CausalQueries" alt="CRAN status"></a></li>
<li><a href="https://doi.org/10.5281/zenodo.14191700" class="external-link"><img src="https://zenodo.org/badge/186861431.svg" alt="DOI"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Macartan Humphreys, Till Tietz, Alan Jacobs, Lily Medina, Georgiy Syunyaev.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
